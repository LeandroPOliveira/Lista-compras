#:import hex kivy.utils.get_color_from_hex

<Image>
    source: 'foto.jpg'
    allow_stretch: True
    keep_ratio: False

<MDCard>
    #padding: 4
    #md_bg_color: "#ffffff"
    line_color: "#ffffff"

<MDIconButton>
    icon_color: "#df2100"
    #icon_size: '80sp'

<IconLeftWidget>
    icon: 'transparent.png'
    #icon_size :'10sp'
    text: ''

<Inicio>:

    FloatLayout:
        size_hint: (1, 1)

        Image:
            source: 'fundo.jpg'

        MDLabel:
            size_hint: 0.8, 0.1
            pos_hint: {'x': 0.1, 'y': 0.35}
            font_size: '18dp'
            text: 'MINHA'
            color: hex('#3b424c')
            bold: True

        MDLabel:
            size_hint: 0.8, 0.1
            pos_hint: {'x': 0.1, 'y': 0.3}
            text: 'LISTA'
            font_size: '44dp'
            color: hex("#ffbd4d")
            bold: True

        MDRectangleFlatIconButton:
            size_hint: 0.4, 0.08
            pos_hint: {'x': 0.1, 'y': 0.2}
            icon: "location-enter"
            text: "Entrar"
            font_size: '20dp'
            md_bg_color: hex("#df2100")
            text_color: "white"
            line_color: hex('#ffbd4d')
            theme_icon_color: "Custom"
            icon_color: hex('#ffffff')
            on_press:
                app.root.current = "tela1"

<ContentNavigationDrawer>:
    ScrollView:

        MDList:

            OneLineAvatarListItem:
                text: 'Lista atual'
                on_press:
                    root.nav_drawer.set_state("close")
                    root.screen_manager.current = "lista_atual"

                IconLeftWidget:
                    icon: 'home-outline'

            OneLineAvatarListItem:
                text: 'Minhas listas'
                on_press:
                    root.nav_drawer.set_state("close")
                    root.screen_manager.current = "minhas_listas"

                IconLeftWidget:
                    icon: 'clipboard-list-outline'

            OneLineAvatarListItem:
                text: 'Pesquisar'
                on_press:
                    root.nav_drawer.set_state("close")
                    root.screen_manager.current = "pesquisar"

                IconLeftWidget:
                    icon: 'clipboard-search-outline'

            #OneLineAvatarListItem:
             #   text: 'Produtos'
              #  on_press:
               #     root.nav_drawer.set_state("close")
                #    root.screen_manager.current = "produtos"

                #IconLeftWidget:
                 #   icon: 'store-plus-outline'

<Principal>:
    name: 'tela1'

    MDTopAppBar:
        id: toolbar
        pos_hint: {"top": 1}
        type_height: 'large'
        elevation: 0
        md_bg_color: hex('#ffbd4d')
        title: ""
        left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]


    MDNavigationLayout:
        x: toolbar.height

        ScreenManager:
            id: screen_manager

            MinhasListas:
                name: "minhas_listas"

            ListaAtual:
                name: "lista_atual"

            Pesquisar:
                name: "pesquisar"

            Produtos:
                name: "produtos"


        MDNavigationDrawer:
            id: nav_drawer
            radius: (0, 16, 16, 0)

            ContentNavigationDrawer:
                screen_manager: screen_manager
                nav_drawer: nav_drawer


<ListaAtual>:
    on_enter:
        root.carregar_lista()

    on_leave:
        root.atualizar_lista()

    FloatLayout:
        size_hint: (1, 0.93)

        Image:


        FloatLayout:
            size_hint: (1, 1)

            ScrollView:
                pos_hint: {'x':.05, 'y':.25}
                size_hint: .9, .6
                #size: (self.width, 500)
                bar_margin: 25
                bar_width: 5
                scroll_type: ['bars', 'content']

                GridLayout:
                    size_hint_y: None
                    height: self.minimum_height
                    row_default_height: 15
                    cols: 1
                    rows: root.numero_linhas
                    bar_width: 50
                    padding: [38, 0, 30, 50]


                    MDList:
                        id: lista
                        spacing: 5


        MDFloatingActionButton:
            pos_hint: {'x': 0.42, 'y': 0.05}
            md_bg_color: "#1b75fd"
            icon: "plus"
            text_color: "white"

            on_press:
                root.novo_item()

<MinhasListas>:
    on_enter:
        root.minhas_listas()

    FloatLayout:
        size_hint: (1, 0.93)

        Image:

        MDLabel:
            text: 'Selecione'
            font_size: '40dp'
            adaptive_size: True
            color: "white"
            pos_hint: {'x': 0.25, 'y': 0.87}
            bold: True
            halign: 'left'

        MDLabel:
            text: 'ou crie'
            font_size: '24dp'
            adaptive_size: True
            color: "white"
            pos_hint: {'x': 0.25, 'y': 0.84}
            bold: True
            halign: 'left'

        MDLabel:
            text: 'sua'
            font_size: '36dp'
            adaptive_size: True
            color: "#df2100"
            pos_hint: {'x': 0.25, 'y': 0.79}
            bold: True
            halign: 'left'

        MDLabel:
            text: 'Lista'
            font_size: '60dp'
            adaptive_size: True
            color: "#df2100"
            pos_hint: {'x': 0.45, 'y': 0.78}
            bold: True
            halign: 'left'

        MDSwiper:
            id: swiper
            size_hint_y: None
            height: root.height
            width: root.width

            MDSwiperItem:

        MDFloatingActionButton:
            pos_hint: {'x': 0.42, 'y': 0.08}
            md_bg_color: "#1b75fd"
            icon: "plus"
            text_color: "white"

            on_press:
                root.nova_lista()

<Pesquisar>:

    FloatLayout:
        size_hint: (1, 0.93)

        Image:

        Image:
            source: 'icons/carrinho.png'
            allow_stretch: False
            #keep_ratio: False
            size_hint_x: 0.7
            pos_hint: {'center_x': 0.5, 'y': 0.3}
            background_color: '#ff5c00'


        MDLabel:
            text: 'Categorias'
            font_size: '28dp'
            adaptive_size: True
            color:  '#ff5c00'
            pos_hint: {'center_x': 0.5, 'y': 0.58}
            bold: True

        ScrollView:
            size_hint: (1, 0.55)
            bar_width: 10
            bar_color: "#df2100"

            GridLayout:
                id: grid_teste
                size_hint_y: None
                height: self.minimum_height
                row_default_height: '150dp'
                cols: 2
                rows: 4
                bar_width: 100
                bar_color: "#df2100"
                padding: [50, 0, 50, 50]
                spacing: 20, 20


                MDCard:
                    pos_hint: {'x': 0.1, 'y': 0.5}


                    MDRelativeLayout:

                        MDIconButton:
                            icon: "icons/fruit.png"
                            text_color: 'white'
                            icon_size: '100sp'
                            pos_hint: {"center_x": 0.5, "y": 0.2}
                            on_press:
                                root.buscar_produtos(self, feira)
                                root.manager.current = "produtos"

                        MDLabel:
                            id: feira
                            text: 'Feira'

                            adaptive_size: True
                            color: "#df2100"
                            pos_hint: {'center_x': 0.5, 'y': 0.05}


                MDCard:
                    pos_hint: {'x': 0.55, 'y': 0.5}

                    MDRelativeLayout:

                        MDIconButton:
                            icon: "icons/bread.png"
                            icon_size: '100sp'
                            pos_hint: {"center_x": 0.5, "y": 0.2}
                            on_press:
                                root.buscar_produtos(self, mercearia)
                                root.manager.current = "produtos"

                        MDLabel:
                            id: mercearia
                            text: 'Mercearia'
                            adaptive_size: True
                            color: "#df2100"
                            pos_hint: {'center_x': 0.5, 'y': 0.05}


                MDCard:
                    pos_hint: {'x': 0.55, 'y': 0.5}

                    MDRelativeLayout:

                        MDIconButton:
                            icon: "icons/drink.png"
                            icon_size: '100sp'
                            pos_hint: {"center_x": 0.5, "y": 0.2}
                            on_press:
                                root.buscar_produtos(self, bebidas)
                                root.manager.current = "produtos"

                        MDLabel:
                            id: bebidas
                            text: 'Bebidas'
                            adaptive_size: True
                            color: "#df2100"
                            pos_hint: {'center_x': 0.5, 'y': 0.05}


                MDCard:
                    pos_hint: {'x': 0.55, 'y': 0.5}

                    MDRelativeLayout:

                        MDIconButton:
                            icon: "icons/steak.png"
                            icon_size: '100sp'
                            pos_hint: {"center_x": 0.5, "y": 0.2}
                            on_press:
                                root.buscar_produtos(self, açougue)
                                root.manager.current = "produtos"

                        MDLabel:
                            id: açougue
                            text: 'Açougue'
                            adaptive_size: True
                            color: "#df2100"
                            pos_hint: {'center_x': 0.5, 'y': 0.05}


                MDCard:
                    pos_hint: {'x': 0.55, 'y': 0.5}

                    MDRelativeLayout:

                        MDIconButton:
                            icon: "icons/higiene.png"
                            icon_size: '100sp'
                            pos_hint: {"center_x": 0.5, "y": 0.2}
                            on_press:
                                root.buscar_produtos(self, higiene)
                                root.manager.current = "produtos"

                        MDLabel:
                            id: higiene
                            text: 'Higiene'
                            adaptive_size: True
                            color: "#df2100"
                            pos_hint: {'center_x': 0.5, 'y': 0.05}


                MDCard:
                    pos_hint: {'x': 0.55, 'y': 0.5}

                    MDRelativeLayout:

                        MDIconButton:
                            icon: "icons/garbage.png"
                            icon_size: '100sp'
                            pos_hint: {"center_x": 0.5, "y": 0.2}
                            on_press:
                                root.buscar_produtos(self, limpeza)
                                root.manager.current = "produtos"


                        MDLabel:
                            id: limpeza
                            text: 'Limpeza'
                            halign: 'center'
                            pos_hint: {'center_x': 0.5, 'y': 0.05}
                            adaptive_size: True
                            color: "#df2100"


                MDCard:
                    pos_hint: {'x': 0.55, 'y': 0.5}

                    MDRelativeLayout:

                        MDIconButton:
                            icon: "icons/lamp.png"
                            icon_size: '100sp'
                            pos_hint: {"center_x": 0.5, "y": 0.2}
                            on_press:
                                root.buscar_produtos(self, utilidades)
                                root.manager.current = "produtos"



                        MDLabel:
                            id: utilidades
                            text: 'Utilidades'
                            adaptive_size: True
                            color: "#df2100"
                            pos_hint: {'center_x': 0.5, 'y': 0.05}



<Produtos>:

    on_enter:
        root.catalogo_produtos()

    FloatLayout:
        size_hint: (1, 1)

        Image:

        FloatLayout:
            size_hint: (1, 1)

            id: lista_produtos


        MDIconButton:
            icon: 'arrow-left-circle'
            size_hint: 0.05, 0.05
            pos_hint: {'x': 0.1, 'y': 0.9}
            on_press:
                root.manager.current = "lista_atual"


        MDRectangleFlatButton:
            pos_hint: {'x': 0.35, 'y': 0.1}
            size_hint: 0.3, 0.08
            md_bg_color: "ffcc21"
            icon: "plus"
            text_color: "white"
            text: 'Adicionar'

            on_press:
                root.adicionar_itens()
                root.manager.current = "lista_atual"


WindowManager:

    Inicio:

    Principal:


